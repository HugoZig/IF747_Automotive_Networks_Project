import threading as th  
import statistics as stats


ids = {    #[dp, media, flag, timeStamp]
162:[0.001781061352053027,0.09997912554210428,0,0],
180:[0.0017810859016526967,0.09997912243036397,0,0],
26:[0.001792107411722978,0.09998597230161241,0,0],
423:[0.019708434424287366,0.4992298476444268,0,0],
433:[0.01970844144500488,0.49922985097636347,0,0],
440:[0.01970842186671204,0.4992298432018446,0,0],
443:[0.01970905220474946,0.49923403551859885,0,0],
457:[0.01970844396342007,0.4992298432018446,0,0],
467:[0.019708177139168243,0.49922977767375687,0,0], 
678:[0.055730383451227467,0.9968982668396849,0,0],
689:[0.055730951085848426,0.9969078761450252,0,0],
699:[0.05573037334873586,0.9968982549927989,0,0],
47:[0.001791889532113291,0.09998597445086288,0,0],
980:[0.6249976310350641,4.921855624765158,0,0],
990:[0.6249975895151877,4.921855311840773,0,0], 
109:[0.001791951454183006,0.09998597267217284,0,0],
141:[0.0017810960763114747,0.099979126505262,0,0],
346:[0.019708168450414437,0.4992297750822506,0,0],
367:[0.019708180691848754,0.49922977804397206,0,0],   
397:[0.019708184960744477,0.49922978100569354,0,0],
410:[0.019708184932562312,0.4992297747120354,0,0],
36:[0.0017806238935499509,0.09997722715824713,0,0],
604:[0.05573094970392991,0.9969080027586185,0,0],
635:[0.05573037464026704,0.9968982794270012,0,0],
668:[0.05573095532448088,0.996907897617506,0,0],
57:[0.0017804579340069348,0.09997723834569444,0,0],
67:[0.0017805018201600877,0.09997723301128247,0,0],
1132:[0.6249994825996603,4.921870220452547,0,0],
88:[0.0017804579340069348,0.09997723834569444,0,0],
98:[0.0017804888448364718,0.09997723182585759,0,0],
119:[0.0017804665898695673,0.09997723523395413,0,0],
131:[0.0017919229423021673,0.09998597452497497,0,0],
152:[0.0017919164778834413,0.09998597230161241,0,0],
326:[0.019708155316274244,0.499229763975795,0,0],
387:[0.01970817765605409,0.49922976989923795,0,0],
408:[0.019708180503687812,0.49922978248655425,0,0],
614:[0.05573037243584884,0.996898294976039,0,0],
625:[0.05573096741196119,0.9969079746222644,0,0],
646:[0.055730954323496514,0.9969079131665437,0,0],
656:[0.055730373179576194,0.9968982549927989,0,0],
1056:[0.6249994342128068,4.921869840472937,0,0],
1111:[0.624999496298317,4.921870328485966,0,0],
1121:[0.6249994781828774,4.921870186924934,0,0],
1143:[0.05573036758389755,0.9968982638779634,0,0],
1154:[0.6249976019199628,4.92185540869832,0,0]
}

def check_timestamp(timestamp, dp, mean):
    if (mean+5*dp) >= timestamp and (mean-5*dp) <= timestamp:
        return True
    else:
        return False

def main():
    try:
        file = open('/home/marcela/Downloads/2o-horario-atk1-vs-def1/atk2-iter3.txt')
    except:
        print('erro')
    else:
        count1=0
        count2=0
        file_r = file.readlines()

        for i in file_r:
            id = i.split(' can0 ')
            id = id[1].split('#')
            id = int(id[0], 16) #pega o id

            ts = i.split(')')
            ts = ts[0].strip('(')
            ts = float(ts) #pega o timestamp

            if(id not in ids.keys()):
                count1+=1

            else:
                data = ids.get(id)
                if(data[3]!=0 and check_timestamp(ts-data[3], data[0], data[1])==False):
                    count2 += 1

                print(ts-data[3])
                data[3] = ts
                ids.update({id:data})
                
        print(count1,count2)
        file.close()
if __name__=='__main__':
    main()
